<!DOCTYPE html>

<html>
<head>
  <title>one-file-eventhandle.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>one-file-eventhandle.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              <hr>
<p><code>forEachEventDispatch</code>
<code>顶部事件的时候触发</code>，<code>cb</code>是plugin（<code>SimpleEventPlugin</code>、<code>EnterLeaveEventPlugin</code>等）对应的<code>executeDispatch</code>方法，或者<code>EventPluginUtils_1.executeDispatch</code>方法</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">forEachEventDispatch</span>(<span class="hljs-params">abstractEvent, cb</span>) {
    <span class="hljs-keyword">var</span> dispatchListeners = abstractEvent.<span class="hljs-property">_dispatchListeners</span>;
    <span class="hljs-keyword">var</span> dispatchIDs = abstractEvent.<span class="hljs-property">_dispatchIDs</span>;
    <span class="hljs-keyword">if</span> (__DEV__) {
        <span class="hljs-title function_">validateEventDispatches</span>(abstractEvent)
    }
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(dispatchListeners)) {
        <span class="hljs-keyword">var</span> i;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; dispatchListeners.<span class="hljs-property">length</span> &amp;&amp; !abstractEvent.<span class="hljs-property">isPropagationStopped</span>; i++) {
            <span class="hljs-title function_">cb</span>(abstractEvent, dispatchListeners[i], dispatchIDs[i])
        }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dispatchListeners) {
        <span class="hljs-title function_">cb</span>(abstractEvent, dispatchListeners, dispatchIDs)
    }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <hr>
<p><code>executeDispatch</code>
<code>顶部事件的时候触发</code>，执行dispatch回调</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">executeDispatch</span>(<span class="hljs-params">abstractEvent, listener, domID</span>) {
    <span class="hljs-title function_">listener</span>(abstractEvent, domID)
}</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-3">&#x00a7;</a>
              </div>
              <hr>
<p><code>executeDispatchesInOrder</code>
<code>顶部事件的时候触发</code>，<code>executeDispatch</code>是plugin（<code>SimpleEventPlugin</code>、<code>EnterLeaveEventPlugin</code>等）对应的<code>executeDispatch</code>方法，或者上面的<code>executeDispatch</code>方法</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">executeDispatchesInOrder</span>(<span class="hljs-params">abstractEvent, executeDispatch</span>) {
    <span class="hljs-title function_">forEachEventDispatch</span>(abstractEvent, executeDispatch);
    abstractEvent.<span class="hljs-property">_dispatchListeners</span> = <span class="hljs-literal">null</span>;
    abstractEvent.<span class="hljs-property">_dispatchIDs</span> = <span class="hljs-literal">null</span>
}</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-4">&#x00a7;</a>
              </div>
              <hr>
<p><code>listenerAtPhase</code>
<code>顶部事件的时候触发</code>，从事件收集类中解析到回调函数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">listenerAtPhase</span>(<span class="hljs-params">id, abstractEvent, propagationPhase</span>) {
    <span class="hljs-keyword">var</span> registrationName = abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">phasedRegistrationNames</span>[propagationPhase];
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">getListener</span>(id, registrationName)
}</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-5">&#x00a7;</a>
              </div>
              <hr>
<p><code>accumulateDirectionalDispatches</code>
<code>顶部事件的时候触发</code>，传入<code>domId</code>，收集冒泡和捕获的回调函数<code>_dispatchListeners</code>和<code>_dispatchIDs</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">accumulateDirectionalDispatches</span>(<span class="hljs-params">domID, upwards, abstractEvent</span>) {
    <span class="hljs-keyword">if</span> (__DEV__) {
        <span class="hljs-keyword">if</span> (!domID) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Dispatching id must not be null&#x27;</span>);
        }
        injection$<span class="hljs-number">2.</span><span class="hljs-title function_">validate</span>()
    }
    <span class="hljs-keyword">var</span> phase = upwards ? <span class="hljs-title class_">PropagationPhases</span>.<span class="hljs-property">bubbled</span> : <span class="hljs-title class_">PropagationPhases</span>.<span class="hljs-property">captured</span>;
    <span class="hljs-keyword">var</span> listener = <span class="hljs-title function_">listenerAtPhase</span>(domID, abstractEvent, phase);
    <span class="hljs-keyword">if</span> (listener) {
        abstractEvent.<span class="hljs-property">_dispatchListeners</span> = <span class="hljs-title function_">accumulate_1</span>(abstractEvent.<span class="hljs-property">_dispatchListeners</span>, listener);
        abstractEvent.<span class="hljs-property">_dispatchIDs</span> = <span class="hljs-title function_">accumulate_1</span>(abstractEvent.<span class="hljs-property">_dispatchIDs</span>, domID)
    }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-6">&#x00a7;</a>
              </div>
              <hr>
<p><code>accumulateTwoPhaseDispatchesSingle</code>
<code>顶部事件的时候触发</code>，传入<code>abstractEvent</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">accumulateTwoPhaseDispatchesSingle</span>(<span class="hljs-params">abstractEvent</span>) {
    <span class="hljs-keyword">if</span> (abstractEvent &amp;&amp; abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">phasedRegistrationNames</span>) {
        injection$<span class="hljs-number">2.</span><span class="hljs-title class_">InstanceHandle</span>.<span class="hljs-title function_">traverseTwoPhase</span>(abstractEvent.<span class="hljs-property">abstractTargetID</span>, accumulateDirectionalDispatches, abstractEvent)
    }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">accumulateDispatches</span>(<span class="hljs-params">id, ignoredDirection, abstractEvent</span>) {
    <span class="hljs-keyword">if</span> (abstractEvent &amp;&amp; abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">registrationName</span>) {
        <span class="hljs-keyword">var</span> listener = <span class="hljs-title function_">getListener</span>(id, abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">registrationName</span>);
        <span class="hljs-keyword">if</span> (listener) {
            abstractEvent.<span class="hljs-property">_dispatchListeners</span> = <span class="hljs-title function_">accumulate_1</span>(abstractEvent.<span class="hljs-property">_dispatchListeners</span>, listener);
            abstractEvent.<span class="hljs-property">_dispatchIDs</span> = <span class="hljs-title function_">accumulate_1</span>(abstractEvent.<span class="hljs-property">_dispatchIDs</span>, id)
        }
    }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">accumulateDirectDispatchesSingle</span>(<span class="hljs-params">abstractEvent</span>) {
    <span class="hljs-keyword">if</span> (abstractEvent &amp;&amp; abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">registrationName</span>) {
        <span class="hljs-title function_">accumulateDispatches</span>(abstractEvent.<span class="hljs-property">abstractTargetID</span>, <span class="hljs-literal">null</span>, abstractEvent)
    }
}</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-7">&#x00a7;</a>
              </div>
              <hr>
<p><code>accumulateTwoPhaseDispatches</code>
<code>顶部事件的时候触发</code>，传入<code>abstractEvents</code>，并两端收集回调函数和<code>_dispatchIDs</code>到<code>abstractEvents</code>中</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">accumulateTwoPhaseDispatches</span>(<span class="hljs-params">abstractEvents</span>) {
    <span class="hljs-keyword">if</span> (__DEV__) {
        injection$<span class="hljs-number">2.</span><span class="hljs-title function_">validate</span>()
    }
    <span class="hljs-title function_">forEachAccumulated_1</span>(abstractEvents, accumulateTwoPhaseDispatchesSingle)
}

<span class="hljs-keyword">var</span> registrationNames$<span class="hljs-number">2</span> = {};
<span class="hljs-keyword">var</span> registrationNamesArr = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-8">&#x00a7;</a>
              </div>
              <hr>
<p><code>abstractEventQueue</code>
<code>顶部事件的时候触发</code>，把<code>abstractEvent</code>实例传入到该元素中，元素是<code>abstractEvent</code>实例</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> abstractEventQueue = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-9">&#x00a7;</a>
              </div>
              <hr>
<p><code>getPluginModuleForAbstractEvent</code>
<code>顶部事件的时候触发</code>，用于获取注入的<code>SimpleEventPlugin</code>、<code>EnterLeaveEventPlugin</code>等，传入<code>abstractEvent</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">getPluginModuleForAbstractEvent</span>(<span class="hljs-params">abstractEvent</span>) {
    <span class="hljs-keyword">if</span> (abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">registrationName</span>) {
        <span class="hljs-keyword">return</span> registrationNames$<span class="hljs-number">2</span>[abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">registrationName</span>]
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> phase <span class="hljs-keyword">in</span> abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">phasedRegistrationNames</span>) {
            <span class="hljs-keyword">if</span> (!abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">phasedRegistrationNames</span>.<span class="hljs-title function_">hasOwnProperty</span>(phase)) {
                <span class="hljs-keyword">continue</span>
            }
            <span class="hljs-keyword">var</span> <span class="hljs-title class_">PluginModule</span> = registrationNames$<span class="hljs-number">2</span>[abstractEvent.<span class="hljs-property">type</span>.<span class="hljs-property">phasedRegistrationNames</span>[phase]];
            <span class="hljs-keyword">if</span> (<span class="hljs-title class_">PluginModule</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-title class_">PluginModule</span>
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
}
<span class="hljs-keyword">var</span> deleteAllListeners = <span class="hljs-keyword">function</span>(<span class="hljs-params">domID</span>) {
    <span class="hljs-keyword">var</span> ii;
    <span class="hljs-keyword">for</span> (ii = <span class="hljs-number">0</span>; ii &lt; registrationNamesArr.<span class="hljs-property">length</span>; ii++) {
        <span class="hljs-title function_">deleteListener</span>(domID, registrationNamesArr[ii])
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-10">&#x00a7;</a>
              </div>
              <hr>
<p><code>extractAbstractEvents</code>
<code>顶部事件的时候触发</code>，传入顶部事件，遍历<code>plugin</code>，以便解析出<code>abstractEvent</code>对象</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> extractAbstractEvents$<span class="hljs-number">1</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">topLevelType, nativeEvent, renderedTargetID, renderedTarget</span>) {
    <span class="hljs-keyword">var</span> abstractEvents;
    <span class="hljs-keyword">var</span> plugins = injection$<span class="hljs-number">1.</span>plugins;
    <span class="hljs-keyword">var</span> len = plugins.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
        <span class="hljs-keyword">var</span> possiblePlugin = plugins[i];
        <span class="hljs-keyword">var</span> extractedAbstractEvents = possiblePlugin &amp;&amp; possiblePlugin.<span class="hljs-title function_">extractAbstractEvents</span>(topLevelType, nativeEvent, renderedTargetID, renderedTarget);
        <span class="hljs-keyword">if</span> (extractedAbstractEvents) {
            abstractEvents = <span class="hljs-title function_">accumulate_1</span>(abstractEvents, extractedAbstractEvents)
        }
    }
    <span class="hljs-keyword">return</span> abstractEvents
};</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-11">&#x00a7;</a>
              </div>
              <hr>
<p><code>enqueueAbstractEvents</code>
<code>顶部事件的时候触发</code>，用于合并<code>abstractEvents</code>到<code>abstractEventQueue</code>中</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> enqueueAbstractEvents = <span class="hljs-keyword">function</span>(<span class="hljs-params">abstractEvents</span>) {
    <span class="hljs-keyword">if</span> (abstractEvents) {
        abstractEventQueue = <span class="hljs-title function_">accumulate_1</span>(abstractEventQueue, abstractEvents)
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-12">&#x00a7;</a>
              </div>
              <hr>
<p><code>executeDispatchesAndRelease</code>
<code>顶部事件的时候触发</code>，把触发的二次加工事件传入；拿到plugin，最后执行<code>abstractEvent</code>并释放</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> executeDispatchesAndRelease = <span class="hljs-keyword">function</span>(<span class="hljs-params">abstractEvent</span>) {
    <span class="hljs-keyword">if</span> (abstractEvent) {
        <span class="hljs-keyword">var</span> <span class="hljs-title class_">PluginModule</span> = <span class="hljs-title function_">getPluginModuleForAbstractEvent</span>(abstractEvent);
        <span class="hljs-keyword">var</span> pluginExecuteDispatch = <span class="hljs-title class_">PluginModule</span> &amp;&amp; <span class="hljs-title class_">PluginModule</span>.<span class="hljs-property">executeDispatch</span>;
        <span class="hljs-title class_">EventPluginUtils</span>_1.<span class="hljs-title function_">executeDispatchesInOrder</span>(abstractEvent, pluginExecuteDispatch || <span class="hljs-title class_">EventPluginUtils</span>_1.<span class="hljs-property">executeDispatch</span>);
        <span class="hljs-title class_">AbstractEvent</span>_1.<span class="hljs-title function_">release</span>(abstractEvent)
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-13">&#x00a7;</a>
              </div>
              <hr>
<p><code>processAbstractEventQueue</code>
<code>顶部事件的时候触发</code>，循环执行<code>executeDispatchesAndRelease</code>函数，其参数为<code>abstractEvent</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">var</span> processAbstractEventQueue = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
    <span class="hljs-keyword">var</span> processingAbstractEventQueue = abstractEventQueue;
    abstractEventQueue = <span class="hljs-literal">null</span>;
    <span class="hljs-title function_">forEachAccumulated_1</span>(processingAbstractEventQueue, executeDispatchesAndRelease);
    <span class="hljs-keyword">if</span> (__DEV__) {
        <span class="hljs-title function_">throwIf_1</span>(abstractEventQueue, <span class="hljs-variable constant_">ERRORS</span>.<span class="hljs-property">DOUBLE_ENQUEUE</span>);
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-14">&#x00a7;</a>
              </div>
              <hr>
<p><code>handleTopLevel</code>
<code>顶部事件的时候触发</code>，解析出<code>abstractEvents</code>对象;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleTopLevel</span>(<span class="hljs-params">topLevelType, nativeEvent, renderedTargetID, renderedTarget</span>) {
    <span class="hljs-keyword">var</span> abstractEvents = <span class="hljs-title class_">EventPluginHub</span>_1.<span class="hljs-title function_">extractAbstractEvents</span>(topLevelType, nativeEvent, renderedTargetID, renderedTarget);
    <span class="hljs-title class_">EventPluginHub</span>_1.<span class="hljs-title function_">enqueueAbstractEvents</span>(abstractEvents);
    <span class="hljs-title class_">EventPluginHub</span>_1.<span class="hljs-title function_">processAbstractEventQueue</span>()
}</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-15">&#x00a7;</a>
              </div>
              <hr>
<p><code>traverseParentPath</code>
<code>顶部事件的时候触发</code>，根据<code>start</code>的<code>id</code>，前后拿<code>id</code>,<code>arg</code>是<code>abstractEvent</code>实例</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">function</span> <span class="hljs-title function_">traverseParentPath</span>(<span class="hljs-params">start, stop, cb, arg, skipFirst, skipLast</span>) {
    start = start || <span class="hljs-string">&#x27;&#x27;</span>;
    stop = stop || <span class="hljs-string">&#x27;&#x27;</span>;
    <span class="hljs-title function_">invariant_1</span>(start !== stop, <span class="hljs-string">&#x27;traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.&#x27;</span>, start);
    <span class="hljs-keyword">var</span> ancestorID = <span class="hljs-title class_">ReactInstanceHandles</span>.<span class="hljs-title function_">getFirstCommonAncestorID</span>(start, stop);
    <span class="hljs-keyword">var</span> traverseUp = ancestorID === stop;
    <span class="hljs-title function_">invariant_1</span>(traverseUp || ancestorID === start, <span class="hljs-string">&#x27;traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.&#x27;</span>, start, stop);
    <span class="hljs-keyword">var</span> depth = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">var</span> traverse = traverseUp ? parentID : <span class="hljs-title class_">ReactInstanceHandles</span>.<span class="hljs-property">nextDescendantID</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> id = start;; id = <span class="hljs-title function_">traverse</span>(id, stop)) {
        <span class="hljs-keyword">if</span> ((!skipFirst || id !== start) &amp;&amp; (!skipLast || id !== stop)) {
            <span class="hljs-title function_">cb</span>(id, traverseUp, arg)
        }
        <span class="hljs-keyword">if</span> (id === stop) {
            <span class="hljs-keyword">break</span>
        }
        <span class="hljs-title function_">invariant_1</span>(depth++ &lt; <span class="hljs-variable constant_">MAX_TREE_DEPTH</span>, <span class="hljs-string">&#x27;traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s&#x27;</span>, start, stop)
    }
}

<span class="hljs-keyword">var</span> <span class="hljs-title class_">ReactInstanceHandles</span> = {
    <span class="hljs-attr">separator</span>: <span class="hljs-variable constant_">SEPARATOR</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-16">&#x00a7;</a>
              </div>
              <hr>
<p><code>traverseTwoPhase</code>
<code>顶部事件的时候触发</code>，传入<code>abstractEvent</code>，<code>cb</code>是<code>accumulateDirectionalDispatches</code>方法</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">traverseTwoPhase</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">targetID, cb, arg</span>) {
        <span class="hljs-keyword">if</span> (targetID) {
            <span class="hljs-title function_">traverseParentPath</span>(<span class="hljs-string">&#x27;&#x27;</span>, targetID, cb, arg, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);
            <span class="hljs-title function_">traverseParentPath</span>(targetID, <span class="hljs-string">&#x27;&#x27;</span>, cb, arg, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>)
        }
    },
};

<span class="hljs-keyword">var</span> <span class="hljs-title class_">EnterLeaveEventPlugin</span> = {
    <span class="hljs-attr">abstractEventTypes</span>: abstractEventTypes,
    <span class="hljs-attr">extractAbstractEvents</span>: extractAbstractEvents
};
<span class="hljs-keyword">var</span> <span class="hljs-title class_">EnterLeaveEventPlugin</span>_1 = <span class="hljs-title class_">EnterLeaveEventPlugin</span>;
<span class="hljs-keyword">var</span> topLevelTypes = <span class="hljs-title class_">EventConstants</span>_1.<span class="hljs-property">topLevelTypes</span>;
<span class="hljs-keyword">var</span> <span class="hljs-title class_">SimpleEventPlugin</span> = {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-17">&#x00a7;</a>
              </div>
              <hr>
<p><code>abstractEventTypes</code>
<code>顶部事件的时候触发</code>，AbstractEvent的 key-value对象，主要用于它的type参数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">abstractEventTypes</span>: {
        <span class="hljs-attr">mouseDown</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onMouseDown</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onMouseDownCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">mouseUp</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onMouseUp</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onMouseUpCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">mouseMove</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onMouseMove</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onMouseMoveCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">doubleClick</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onDoubleClick</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onDoubleClickCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">click</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onClick</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onClickCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">mouseWheel</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onMouseWheel</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onMouseWheelCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">touchStart</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onTouchStart</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onTouchStartCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">touchEnd</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onTouchEnd</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onTouchEndCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">touchCancel</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onTouchCancel</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onTouchCancelCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">touchMove</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onTouchMove</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onTouchMoveCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">keyUp</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onKeyUp</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onKeyUpCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">keyPress</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onKeyPress</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onKeyPressCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">keyDown</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onKeyDown</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onKeyDownCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">focus</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onFocus</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onFocusCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">blur</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onBlur</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onBlurCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">scroll</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onScroll</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onScrollCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">change</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onChange</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onChangeCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-attr">submit</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onSubmit</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onSubmitCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        },
        <span class="hljs-title class_">DOMCharacterDataModified</span>: {
            <span class="hljs-attr">phasedRegistrationNames</span>: {
                <span class="hljs-attr">bubbled</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onDOMCharacterDataModified</span>: <span class="hljs-literal">true</span>
                }),
                <span class="hljs-attr">captured</span>: <span class="hljs-title function_">keyOf_1</span>({
                    <span class="hljs-attr">onDOMCharacterDataModifiedCapture</span>: <span class="hljs-literal">true</span>
                })
            }
        }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-18">&#x00a7;</a>
              </div>
              <hr>
<p><code>executeDispatch</code>
<code>顶部事件的时候触发</code>，执行dispatch回调</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">executeDispatch</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">abstractEvent, listener, domID</span>) {
        <span class="hljs-keyword">var</span> returnValue = <span class="hljs-title function_">listener</span>(abstractEvent, domID);
        <span class="hljs-keyword">if</span> (returnValue === <span class="hljs-literal">false</span>) {
            abstractEvent.<span class="hljs-title function_">stopPropagation</span>();
            abstractEvent.<span class="hljs-title function_">preventDefault</span>()
        }
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-19">&#x00a7;</a>
              </div>
              <hr>
<p><code>extractAbstractEvents</code>
<code>顶部事件的时候触发</code>，根据顶部触发的事件，生成对应的abstractEvent对象，并前后收集回调函数和<code>_dispatchIDs</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">extractAbstractEvents</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">topLevelType, nativeEvent, renderedTargetID, renderedTarget</span>) {
        <span class="hljs-keyword">var</span> data;
        <span class="hljs-keyword">var</span> abstractEventType = <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">topLevelTypesToAbstract</span>[topLevelType];
        <span class="hljs-keyword">if</span> (!abstractEventType) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
        }
        <span class="hljs-keyword">switch</span> (topLevelType) {
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topMouseWheel</span>:
                data = <span class="hljs-title class_">AbstractEvent</span>_1.<span class="hljs-title function_">normalizeMouseWheelData</span>(nativeEvent);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topScroll</span>:
                data = <span class="hljs-title class_">AbstractEvent</span>_1.<span class="hljs-title function_">normalizeScrollDataFromTarget</span>(renderedTarget);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topClick</span>:
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topDoubleClick</span>:
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topChange</span>:
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topDOMCharacterDataModified</span>:
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topMouseDown</span>:
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topMouseUp</span>:
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topMouseMove</span>:
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topTouchMove</span>:
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topTouchStart</span>:
            <span class="hljs-keyword">case</span> topLevelTypes.<span class="hljs-property">topTouchEnd</span>:
                data = <span class="hljs-title class_">AbstractEvent</span>_1.<span class="hljs-title function_">normalizePointerData</span>(nativeEvent);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-attr">default</span>:
                data = <span class="hljs-literal">null</span>
        }
        <span class="hljs-keyword">var</span> abstractEvent = <span class="hljs-title class_">AbstractEvent</span>_1.<span class="hljs-title function_">getPooled</span>(abstractEventType, renderedTargetID, topLevelType, nativeEvent, data);
        <span class="hljs-title class_">EventPropagators</span>_1.<span class="hljs-title function_">accumulateTwoPhaseDispatches</span>(abstractEvent);
        <span class="hljs-keyword">return</span> abstractEvent
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-20">&#x00a7;</a>
              </div>
              <hr>
<p><code>SimpleEventPlugin.topLevelTypesToAbstract</code>
<code>顶部事件的时候触发</code>，根据顶部事件类型进行解析<code>abstractEvent</code>的type参数</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">topLevelTypesToAbstract</span> = {
    <span class="hljs-attr">topMouseDown</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">mouseDown</span>,
    <span class="hljs-attr">topMouseUp</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">mouseUp</span>,
    <span class="hljs-attr">topMouseMove</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">mouseMove</span>,
    <span class="hljs-attr">topClick</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">click</span>,
    <span class="hljs-attr">topDoubleClick</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">doubleClick</span>,
    <span class="hljs-attr">topMouseWheel</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">mouseWheel</span>,
    <span class="hljs-attr">topTouchStart</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">touchStart</span>,
    <span class="hljs-attr">topTouchEnd</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">touchEnd</span>,
    <span class="hljs-attr">topTouchMove</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">touchMove</span>,
    <span class="hljs-attr">topTouchCancel</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">touchCancel</span>,
    <span class="hljs-attr">topKeyUp</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">keyUp</span>,
    <span class="hljs-attr">topKeyPress</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">keyPress</span>,
    <span class="hljs-attr">topKeyDown</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">keyDown</span>,
    <span class="hljs-attr">topFocus</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">focus</span>,
    <span class="hljs-attr">topBlur</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">blur</span>,
    <span class="hljs-attr">topScroll</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">scroll</span>,
    <span class="hljs-attr">topChange</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">change</span>,
    <span class="hljs-attr">topSubmit</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">submit</span>,
    <span class="hljs-attr">topDOMCharacterDataModified</span>: <span class="hljs-title class_">SimpleEventPlugin</span>.<span class="hljs-property">abstractEventTypes</span>.<span class="hljs-property">DOMCharacterDataModified</span>
};
<span class="hljs-keyword">var</span> <span class="hljs-title class_">SimpleEventPlugin</span>_1 = <span class="hljs-title class_">SimpleEventPlugin</span>;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
